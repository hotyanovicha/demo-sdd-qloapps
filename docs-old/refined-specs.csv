Title,Description,Preconditions,Steps,Results,State,Priority,Type,Tags,Folder
User Registration,"**Spec**: `auth.spec.ts`
**Test name**: `should redirect to My Account when a new user registers successfully`
**Fixture dependencies**: `page`
**Data requirements**:
**Risks**: Email uniqueness collision if not handled dynamically.",None (starts at Homepage).,1.  Navigate to Homepage `/en/`.,,Active,Critical,Functional,import,Imports
,,,"2.  Click ""Sign in"" link.",,,,,,
,,,"3.  Enter unique email in ""Create an account"" input.",,,,,,
,,,"4.  Click ""Create an account"".",,,,,,
,,,"5.  Fill ""First Name"", ""Last Name"", ""Password"", ""Title"".",,,,,,
,,,"6.  Click ""Register"".","- URL contains `controller=my-account`.
- Heading ""My account"" is visible.
- Success alert ""Your account has been created."" is visible.",,,,,
User Login,"**Spec**: `auth.spec.ts`
**Test name**: `should display dashboard when registered user logs in`
**Fixture dependencies**: `page` (No ""auth"" fixture, as we test login itself).
**Data requirements**:
**Risks**: Setup is slow; relies on Registration flow working.",,1.  Navigate to Homepage `/en/`.,,Active,Critical,Functional,import,Imports
,,,"2.  Click ""Sign in"".",,,,,,
,,,3.  Enter valid email/password (from setup).,,,,,,
,,,"4.  Click ""Sign in"" button.","- URL contains `controller=my-account`.
- Header User Info contains correct First/Last name.
- ""Sign out"" button is visible.
- Dashboard links (""Order History"", ""Credit Slips"") are visible.",,,,,
Room Search,"**Spec**: `room-search.spec.ts`
**Test name**: `should list available rooms when searching with valid dates`
**Fixture dependencies**: `page`
**Data requirements**: None (relies on default hotel inventory).
**Risks**: No inventory available for selected dates (flaky). *Mitigation*: Reset inventory before run or mock search results.",None.,1.  Navigate to Homepage.,,Active,High,Functional,import,Imports
,,,"2.  Type ""Hotel Prime"" in Location input.",,,,,,
,,,"3.  Select ""The Hotel Prime"" from typeahead info.",,,,,,
,,,"4.  Set Check-in to `Today + 1`, Check-out to `Today + 3` (using relative dates).",,,,,,
,,,"5.  Click ""Search Now"".","- URL contains `controller=search`.
- List of rooms `#center_column .room_cont` count is > 0.
- At least one room card contains text ""General Rooms"" (or known type).",,,,,
Add Room to Cart,"**Spec**: `room-search.spec.ts`
**Test name**: `should show success modal when adding a room to cart`
**Fixture dependencies**: `searchResults` (Fixture: navigates to Search page with results).
**Data requirements**: Rooms available.
**Risks**: ""Book Now"" might be disabled if room is sold out.",`searchResults` fixture logic (UI Search).,"1.  Click ""Book Now"" on first available room.",,Active,High,Functional,import,Imports
,,,2.  Wait for modal `#layer_cart` to be visible.,"- Modal header contains text ""Room successfully added to your cart"".
- ""Proceed to checkout"" button is visible and enabled.",,,,,
Occupancy Limits,"**Spec**: `room-search.spec.ts`
**Test name**: `should show error when exceeding max adult occupancy`
**Fixture dependencies**: `searchResults`
**Data requirements**: Room with specific limit (e.g., 2 adults).
**Risks**: Selector for ""+"" button might vary; logic might be JS-driven (slow).",`searchResults` fixture logic (UI Search).,1.  Find room with Max Adults = 2.,,Active,Medium,Functional,import,Imports
,,,"2.  Click ""+"" on Adults counter 3 times (0 -> 1 -> 2 -> 3 attempt).","- Error message ""Maximum adult occupancy reached"" (fancybox or tooltip) is visible.
- Adult count input value equals ""2"".",,,,,
Cart Summary & Checkout,"**Spec**: `checkout.spec.ts`
**Test name**: `should display correct items in cart summary`
**Fixture dependencies**: `cartWithRoom` (User login -> UI Search -> Add Room -> Proceed from Modal).
**Data requirements**: User with items in cart.
**Risks**: None.",`cartWithRoom` fixture ensures user is at summary step via UI.,1.  Review summary table `#order-detail-content`.,,Active,Critical,Functional,import,Imports
,,,"2.  Click ""Proceed"" (Summary step).","- Summary table contains room name.
- After click, URL contains `controller=order&step=1` (Addresses).",,,,,
Guest Information & Address,"**Spec**: `checkout.spec.ts`
**Test name**: `should proceed to payment when address is valid`
**Fixture dependencies**: `cartWithRoom`
**Data requirements**: User with configured address.
**Risks**: Address might be missing if user creation was partial (unlikely with UI flow).",Navigate through Summary to Address step (Address is created during UI Registration in `cartWithRoom` -> `auth` fixture).,1.  Verify Address dropdown has a selection.,,Active,Medium,Functional,import,Imports
,,,"2.  Click ""Proceed"" (Address step).","- Navigate to Payment step (`controller=order` with `step=3` or similar params).
- ""Payment"" header is visible.",,,,,
Payment Terms Validation (Negative),"**Spec**: `checkout.spec.ts`
**Test name**: `should prevent payment when terms are not accepted`
**Fixture dependencies**: `paymentReadyUser` (User at payment step).
**Data requirements**: None.
**Risks**: Alert might be native browser alert.",`paymentReadyUser` fixture logic (Full UI checkout flow until Payment).,"1.  Identify ""Terms of Service"" checkbox `#cgv`.",,Active,Critical,Functional,import,Imports
,,,2.  Ensure checkbox is **unchecked**.,,,,,,
,,,"3.  Click ""Pay by bank wire"" `a.bankwire`.","- URL does NOT change to bank wire payment page.
- Error message ""You must agree to the terms of service before continuing."" (fancybox or alert) is visible.",,,,,
Complete Order (Positive),"**Spec**: `checkout.spec.ts`
**Test name**: `should complete order via Bank Wire`
**Fixture dependencies**: `paymentReadyUser`
**Data requirements**: None.
**Risks**: Bank wire module might be disabled in admin.",`paymentReadyUser` fixture logic.,"1.  Check ""Terms of Service"" checkbox `#cgv`.",,Active,High,Functional,import,Imports
,,,"2.  Click ""Pay by bank wire"".",,,,,,
,,,3.  Verify navigation to Summary.,,,,,,
,,,"4.  Click ""I confirm my order"".","- URL contains `controller=order-confirmation`.
- Heading ""Order confirmation"" is visible.
- Text ""Your order on The Hotel Prime is complete."" is visible.
- Reference Code is visible (capture via Regex if needed).",,,,,
Verify Order History,"**Spec**: `order-history.spec.ts`
**Test name**: `should display completed order in history`
**Fixture dependencies**: `completedOrder` (User with 1 past order).
**Data requirements**: Order Reference from setup.
**Risks**: Timezone differences for ""Date"" assertion.",`completedOrder` runs full UI checkout flow and captures Reference.,"1.  Click User Name in header -> ""Order History"".",,Active,High,Functional,import,Imports
,,,2.  Locate first row in table `tr.first_item`.,"- First row Order Reference matches the one from setup.
- Date is today.
- Total price matches.",,,,,
Admin Login,"**Spec**: `admin-auth.spec.ts`
**Test name**: `should display dashboard upon successful admin login`
**Fixture dependencies**: `page`
**Data requirements**: Valid Admin credentials (env vars).
**Risks**: Admin URL might be dynamic/tokenized.",None.,1.  Navigate to Admin URL.,,Active,Critical,Functional,import,Imports
,,,2.  Enter Email/Password.,,,,,,
,,,"3.  Click ""Log in"".","- URL contains `controller=AdminDashboard`.
- Sidebar menu is visible.
- User profile icon is visible in header.",,,,,
Admin - Verify Order Details,"**Spec**: `admin-orders.spec.ts`
**Test name**: `should display correct details for a new order`
**Fixture dependencies**: `adminAuth`, `completedOrder` (Auxiliary user context).
**Data requirements**: Order Reference from a fresh user order.
**Risks**: Order processing delay (unlikely).",,1.  Navigate to Orders page.,,Active,High,Functional,import,Imports
,,,2.  Filter/Search for `orderReference` or pick first row.,,,,,,
,,,3.  Click View Details.,"- Customer Name matches user.
- Total Price matches.
- Initial Status is ""Awaiting bank wire payment"".",,,,,
Admin - Update Order Status,"**Spec**: `admin-orders.spec.ts`
**Test name**: `should update order status to Payment Accepted`
**Fixture dependencies**: `adminAuth`, `orderAwaitingPayment` (Order in initial state).
**Data requirements**: Order Reference.
**Risks**: Status IDs might vary; selection by text is safer.","`orderAwaitingPayment` creates order via UI, then Admin logs in and finds it.",1.  Navigate to Order Details.,,Active,High,Functional,import,Imports
,,,"2.  Select ""Payment accepted"" in status dropdown.",,,,,,
,,,"3.  Click ""Update status"".","- Status badge updates to ""Payment accepted"".
- Status history table adds a new row ""Payment accepted"".",,,,,
Admin - Send Message to User,"**Spec**: `admin-orders.spec.ts`
**Test name**: `should append sent message to order history`
**Fixture dependencies**: `adminAuth`, `orderAwaitingPayment`.
**Data requirements**: Order Reference.
**Risks**: None.",Navigate to Order Details (Setup involves UI order creation).,1.  Scroll to Messages.,,Active,Medium,Functional,import,Imports
,,,"2.  Type ""Your booking is confirmed!"".",,,,,,
,,,"3.  Check ""Display to customer"".",,,,,,
,,,"4.  Click ""Send message"".","- Message appears in list above.
- ""Visible to customer"" column shows ""Yes"" (green check).",,,,,
User - Verify Admin Message,"**Spec**: `order-history.spec.ts`
**Test name**: `should display message sent by admin`
**Fixture dependencies**: `orderWithAdminMessage` (User with order + Admin message sent).
**Data requirements**: Order with message.
**Risks**: None.",,1.  User Login -> Order History -> Details.,,Active,Medium,Functional,import,Imports
,,,2.  Scroll to Messages.,"- Message text ""Your booking is confirmed!"" is visible.
- Sender is ""Shop Name"" (or Admin).",,,,,
Admin - Verify Customer,"**Spec**: `admin-customers.spec.ts`
**Test name**: `should find customer by email`
**Fixture dependencies**: `adminAuth`, `registeredUser` (or static test user).
**Data requirements**: Known user email.
**Risks**: None.",Ensure user exists by running **UI Registration Flow**.,1.  Navigate to Customers.,,Active,Medium,Functional,import,Imports
,,,2.  Input Email in Filter.,,,,,,
,,,3.  Click Search.,"- Table shows exactly 1 row.
- Email column matches input.",,,,,
Admin - Filter Orders by Reference,"**Spec**: `admin-orders.spec.ts`
**Test name**: `should find order by reference code`
**Fixture dependencies**: `adminAuth`, `completedOrder`.
**Data requirements**: Order Reference.
**Risks**: None.",Ensure order exists by running **UI Checkout Flow**.,1.  Navigate to Orders.,,Active,High,Functional,import,Imports
,,,2.  Input Reference in Filter.,,,,,,
,,,3.  Click Search.,"- Table shows exactly 1 row.
- Reference column matches input.",,,,,
Admin - Access Stats Dashboard,"**Spec**: `admin-dashboard.spec.ts`
**Test name**: `should display key statistics widgets`
**Fixture dependencies**: `adminAuth`
**Data requirements**: None.
**Risks**: Dashboard might be slow to load stats.",Navigate to Dashboard.,1.  Wait for dashboard load.,"- ""Calendar"" widget is visible.
- ""Online Visitors"" widget is visible.
- No 500 errors.",Active,Medium,Functional,import,Imports
